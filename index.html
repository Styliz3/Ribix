<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>PartyLinks</title>
<meta name="description" content="Create custom message links with animated cards. Links expire after 1 hour.">

<!-- Static OG tags (embed preview is same for all links) -->
<meta property="og:title" content="ðŸŽ‰ PartyLinks â€” Custom Message" />
<meta property="og:description" content="Create fun shareable message cards. Links expire after 1 hour." />
<meta property="og:image" content="https://dummyimage.com/1200x630/00ff90/001100.png&text=PartyLinks" />
<meta name="twitter:card" content="summary_large_image" />

<style>
body{margin:0;font-family:Inter,system-ui,Segoe UI;background:#0a0f12;color:#fff;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px}
.card{background:#15181c;padding:30px;border-radius:14px;box-shadow:0 8px 30px rgba(0,0,0,.6);max-width:460px;width:100%;text-align:center}
h1{margin:0 0 15px;color:#00ff90}
input,button{padding:14px;border-radius:10px;font-size:16px;border:none}
input{flex:1;background:#1e2227;color:#fff}
button{background:#00ff90;color:#000;font-weight:bold;cursor:pointer}
.input-row{display:flex;gap:10px;margin-top:15px}
.links{margin-top:15px;font-size:14px}
.avatar{width:120px;height:120px;border-radius:12px;overflow:hidden;margin:0 auto 15px;background:#111;display:flex;align-items:center;justify-content:center;font-weight:700;font-size:32px}
.msg{background:#e6fff4;color:#042016;padding:12px;border-radius:10px;font-weight:800;animation:pop .4s ease}
@keyframes pop{0%{transform:scale(.8);opacity:0}100%{transform:scale(1);opacity:1}}
.fade{animation:fadein 1s ease}
@keyframes fadein{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
</style>
</head>
<body>
<div id="app"></div>

<script>
const app=document.getElementById('app');
const path=window.location.pathname;

// --- Showcase page (/@username) ---
if(path.startsWith('/@') && path.length>2){
  const user=decodeURIComponent(path.slice(2));
  const viewsKey='pl_views_'+user;
  let views=parseInt(localStorage.getItem(viewsKey)||'0',10)+1;
  localStorage.setItem(viewsKey,views);

  app.innerHTML=`
    <div class="card fade">
      <div class="avatar">${user.slice(1,3).toUpperCase()}</div>
      <h2>@${user}</h2>
      <div class="msg">@${user} is here ðŸŽ‰</div>
      <p>Views: ${views}</p>
      <div style="margin-top:12px">
        <a href="/" style="color:#00ff90;text-decoration:none;font-weight:700">âž• Create your own</a>
      </div>
    </div>`;
}
// --- Homepage (/): generator ---
else{
  app.innerHTML=`
    <div class="card fade">
      <h1>PartyLinks</h1>
      <p>Create a fun shareable link like <b>/@YourName</b></p>
      <div class="input-row">
        <input id="username" placeholder="Enter a name or tag" />
        <button id="makeBtn">Create</button>
      </div>
      <div class="links" id="links"></div>
    </div>`;
  const btn=document.getElementById('makeBtn');
  const input=document.getElementById('username');
  const list=document.getElementById('links');
  const storageKey='pl_recent';
  const render=()=>{
    const arr=JSON.parse(localStorage.getItem(storageKey)||'[]');
    list.innerHTML=arr.map(u=>`<div><a href="/@${encodeURIComponent(u)}">/@${u}</a></div>`).join('')||'<i>No links yet</i>';
  };
  render();
  btn.onclick=()=>{
    const val=input.value.trim();
    if(!val)return alert('Enter a name');
    const arr=JSON.parse(localStorage.getItem(storageKey)||'[]');
    arr.push(val); localStorage.setItem(storageKey,JSON.stringify(arr));
    window.location.href='/@'+encodeURIComponent(val);
  };
}
</script>
</body>
</html>
