<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>EmeraldPet — Roblox Pet Generator</title>
<meta name="description" content="Generate your exclusive Roblox pet instantly with EmeraldPet. Looks official, totally free!">

<!-- OG/Twitter preview (static default) -->
<meta property="og:type" content="website"/>
<meta property="og:site_name" content="EmeraldPet"/>
<meta property="og:title" content="EmeraldPet — Free Roblox Pet Generator"/>
<meta property="og:description" content="Claim your exclusive Roblox pet now. Official-looking, totally free."/>
<meta property="og:image" content="https://etu-values.vercel.app/assets/pets/diamond-phantom-overseer.png"/>
<meta property="og:url" content="https://your-vercel-site.vercel.app/"/>
<meta name="twitter:card" content="summary_large_image"/>

<style>
body {
  margin:0;font-family:"Segoe UI",sans-serif;background:#0d0f11;color:#fff;
  display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px;
}
.card {
  background:#15181c;border-radius:12px;padding:30px;
  max-width:440px;width:100%;text-align:center;
  box-shadow:0 8px 24px rgba(0,0,0,0.6);
}
h1 {margin:0 0 15px;color:#00ff90;font-size:22px;}
input,button {
  width:100%;padding:12px;border-radius:8px;font-size:16px;margin-bottom:12px;border:none;
}
input{background:#1e2227;color:#fff;}
button{background:#00ff90;color:#000;font-weight:bold;cursor:pointer;}
.avatar{margin:20px auto;width:120px;height:120px;border-radius:12px;overflow:hidden;background:#111;position:relative;}
.avatar img{width:100%;height:100%;object-fit:cover;display:block;}
.pet{margin-top:20px;min-height:200px;position:relative;}
.pet img{width:200px;border-radius:12px;animation:pop .4s ease;}
@keyframes pop {0%{transform:scale(.8);opacity:0}100%{transform:scale(1);opacity:1}}
.share{margin-top:20px;font-size:14px;background:#222;padding:10px;border-radius:8px;word-break:break-all;}

/* Skeleton loading effect */
.skeleton{background:linear-gradient(90deg,#222 25%,#333 37%,#222 63%);background-size:400% 100%;animation:skeleton 1.4s ease infinite;}
@keyframes skeleton{0%{background-position:100% 50%}100%{background-position:0 50%}}
.loading-bar{height:10px;border-radius:6px;overflow:hidden;margin-top:15px;}
.loading-fill{width:0%;height:100%;background:#00ff90;animation:fill 2s linear forwards;}
@keyframes fill{from{width:0%}to{width:100%}}
</style>
</head>
<body>
<div class="card" id="generator">
  <h1>EmeraldPet Generator</h1>
  <div id="formArea">
    <input id="username" placeholder="Enter Roblox username">
    <button onclick="generate()">Generate Pet</button>
  </div>
  <div id="resultArea" style="display:none;">
    <div class="avatar skeleton" id="avatarBox"></div>
    <h2 id="displayName"></h2>
    <div class="pet" id="petBox">
      <div class="loading-bar"><div class="loading-fill"></div></div>
      <p id="petStatus">Fetching your pet...</p>
    </div>
    <div class="share" id="shareBox" style="display:none;">
      <p>Share this link:</p>
      <a id="shareLink" href=""></a>
    </div>
  </div>
</div>

<script>
const PETS=[
 {src:"https://etu-values.vercel.app/assets/pets/diamond-phantom-overseer.png",name:"Diamond Phantom Overseer"},
 {src:"https://etu-values.vercel.app/assets/pets/shiny-phantom-overseer.png",name:"Shiny Phantom Overseer"},
 {src:"https://etu-values.vercel.app/assets/pets/shiny-sakura-tarragon.png",name:"Shiny Sakura Tarragon"}
];

async function generate(){
  const username=document.getElementById("username").value.trim();
  if(!username)return alert("Enter username");
  document.getElementById("formArea").style.display="none";
  document.getElementById("resultArea").style.display="block";
  document.getElementById("displayName").textContent=username;
  // random pet
  const pet=PETS[Math.floor(Math.random()*PETS.length)];

  // Step 1: load avatar reliably
  try{
    const res=await fetch("https://users.roblox.com/v1/usernames/users",{
      method:"POST",headers:{"Content-Type":"application/json"},
      body:JSON.stringify({usernames:[username]})
    });
    const data=await res.json();
    if(data.data&&data.data[0]){
      const id=data.data[0].id;
      const avatarUrl=`https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=${id}&size=150x150&format=Png&isCircular=false`;
      const img=document.createElement("img");
      img.src=avatarUrl;
      img.onload=()=>{
        const box=document.getElementById("avatarBox");
        box.classList.remove("skeleton");
        box.innerHTML="";
        box.appendChild(img);
      };
    }
  }catch(e){console.log("avatar error",e)}

  // Step 2: simulate fetching pet
  setTimeout(()=>{
    const petBox=document.getElementById("petBox");
    petBox.innerHTML=`<img src="${pet.src}"><h3>${pet.name}</h3>`;
    document.getElementById("shareBox").style.display="block";
    // share link
    const url=`${location.origin}${location.pathname}?user=${encodeURIComponent(username)}&pet=${encodeURIComponent(pet.src)}`;
    const link=document.getElementById("shareLink");
    link.href=url;
    link.textContent=url;
  },2200); // delay for effect
}
</script>
</body>
</html>
